import{r as p,a as e,T as f,F as C,I as F,z as c,j as r,o as x,aD as T,aE as h,L as A,q as B,W as D,aG as S,B as w,b1 as L,bm as k,b2 as q,bn as I}from"./index-41171d5e.js";import{C as E}from"./CustomBreadcrumbs-d1600cc8.js";import{u as b,d as G,C as m,a as g,H as P,b as O}from"./styles-0db8a13f.js";import{u as R,H as M,a as j,b as V}from"./useTableQuery-54069143.js";import"./compressor.esm-2f7fd899.js";import"./Image-4f419779.js";import{H as y}from"./HitTextField-87bdfa3f.js";import{C as W}from"./Campeonato-60b6e0fd.js";import{D as $}from"./DialogHeader-6536537f.js";import{c as z,a as u,o as Q}from"./yup-4caf009a.js";import{H as U}from"./HitNumberField-5c6da2cd.js";import{H as J}from"./HitSelectField-1181103a.js";import{a as K,b as X}from"./CampeonatoRepository-b1a153b0.js";import{C as Y}from"./Card-65106afd.js";import"./Select-5bd52ba1.js";import"./Grid-4bc07afd.js";import"./Autocomplete-fed4dfde.js";import"./Close-4614118c.js";import"./Chip-cfc1950e.js";import"./KeyboardArrowRight-4557c216.js";import"./enums-ec95615b.js";import"./useSupenseQuery-97e21a26.js";const Z={nombre:""},_=({data:i,isLoading:l,onDelete:o,onEdit:t})=>{const a=b({defaultValues:Z}),[v,d]=p.useState(null),s=p.useRef(),H=R([{field:"nombre",headerName:"Nombre",type:"string",renderHeader:()=>e("div",{className:"px-2",children:"Nombre"}),renderCell:n=>e("div",{className:"w-full px-2",children:e(f,{children:n.row.name})})},{field:"type",headerName:"Tipo",type:"string",renderCell:n=>e("div",{className:"w-full px-2",children:e(f,{children:n.row.type===W.COPA?"Copa":"Torneo Regular"})})},{field:"action",headerName:"Acciones",maxWidth:200,type:"actions",align:"center",headerAlign:"center",renderCell:n=>e(C,{children:e(F,{onClick:N=>{s.current=n.row.id,d(N.currentTarget)},children:e(c,{icon:"eva:more-vertical-fill"})})})}]);return r(x,{children:[e(M,{filter:{hf:a,render:r(G,{children:[e(m,{name:"nombre",render:n=>e(y,{...n,label:"Nombre"})}),r(g,{children:[e(j,{}),e(V,{})]})]})},disableRowSelectionOnClick:!0,rows:i,columns:H}),r(T,{open:v,onClose:()=>{d(null),s.current=void 0},arrow:"right-top",children:[r(h,{component:A,to:B.dashboard.campeonatos.manage(s.current),children:[e(c,{icon:"mdi:eye"}),"Administrar"]}),r(h,{onClick:()=>{d(null),o(s.current)},sx:{color:"error.main"},children:[e(c,{icon:"eva:trash-2-outline"}),"Eliminar"]})]})]})},ee=z().shape({name:u().required("Nombre es requerido"),year:u().required("Año es requerido"),type:u().required("Tipo es requerido")}),ae={name:"",type:""},re=({onSubmit:i,initialValues:l,edit:o=!1})=>{const t=b({resolver:Q(ee),defaultValues:ae,mode:"onBlur",values:l});return r(P,{hf:t,onSubmit:i,children:[e(m,{name:"name",control:t.control,render:a=>e(y,{...a,label:"Nombre",floatingLabel:!1})}),e(m,{name:"year",control:t.control,render:a=>e(U,{...a,label:"Año",floatingLabel:!1})}),e(m,{name:"type",control:t.control,render:a=>e(J,{...a,label:"Tipo",options:[{label:"Torneo regular",value:"league"},{label:"Copa",value:"cup"}],floatingLabel:!1})}),e(g,{children:e(O,{children:o?"Guardar":"Crear"})})]})},Te=()=>{const{data:i}=K(),[l,o]=p.useState(!1),t=X();return r(C,{children:[e(D,{children:e("title",{children:"Campeonatos | LIGA CUBB"})}),r(S,{children:[e(E,{heading:"Listado - Campeonatos",links:[{name:""}],action:e(w,{variant:"contained",startIcon:e(c,{icon:"eva:plus-fill"}),onClick:()=>o(!0),children:"Nuevo campeonato"})}),e(Y,{children:e(_,{data:i,isLoading:!1,onDelete:a=>{},onEdit:a=>{}})})]}),r(L,{open:l,onClose:()=>o(!1),children:[e(k,{children:e($,{label:"Nuevo campeonato",onClick:()=>o(!1)})}),e(q,{sx:{mb:4},children:e(re,{onSubmit:async a=>{await t.mutateAsync({...a,year:Number(a.year)},{onSuccess:()=>{o(!1),I("Campeonato creado correctamente",{variant:"success"})}})}})})]})]})};export{Te as default};
