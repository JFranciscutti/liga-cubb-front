import{aD as w,r as u,a as e,T as x,e as E,F as G,I as q,z as m,j as a,o as O,aE as P,aF as b,L as T,q as I,aG as R,W as V,aH as j,B as $,aI as S,aJ as N,aK as F,aL as y}from"./index-7564c5a3.js";import{C as z}from"./useSupenseQuery-2f1fe18d.js";import{u as L,f as W,C as v,b as A,c as J,a as D,o as K,H as U,d as Q}from"./styles-3f44635e.js";import{u as X,H as Y,a as Z,b as _}from"./useTableQuery-57349f10.js";import"./compressor.esm-bc452357.js";import"./Image-6bd31657.js";import{H as M}from"./HitTextField-1715ae1e.js";import{D as B}from"./DialogHeader-b66d443c.js";import{H as ee}from"./HitSelectField-dd9c2783.js";import{u as ae,a as re,b as te}from"./CategoriaRepository-7eb5d34c.js";import{C as ne}from"./Card-33a9d174.js";import"./Select-801e906b.js";import"./Grid-e2d030a2.js";import"./Close-b57c7e68.js";import"./KeyboardArrowRight-15df010f.js";import"./enums-ec95615b.js";const oe={nombre:""},ie=({data:l,isLoading:f,onDelete:d,onEdit:r})=>{const i=w(),g=L({defaultValues:oe}),[h,s]=u.useState(null),t=u.useRef(),p=X([{field:"nombre",headerName:"Nombre",type:"string",renderHeader:()=>e("div",{className:"px-2",children:"Nombre"}),renderCell:n=>e("div",{className:"w-full px-2",children:e(x,{children:n.row.name})})},{field:"gender",headerName:"Género",type:"string",renderHeader:()=>e("div",{className:"px-2",children:"Género"}),renderCell:n=>e("div",{className:"w-full px-2",children:e(x,{children:E(n.row.gender)})})},{field:"action",headerName:"Acciones",maxWidth:200,type:"actions",align:"center",headerAlign:"center",renderCell:n=>e(G,{children:e(q,{onClick:C=>{t.current=n.row.id,s(C.currentTarget)},children:e(m,{icon:"eva:more-vertical-fill"})})})}]);return a(O,{children:[e(Y,{filter:{hf:g,render:a(W,{children:[e(v,{name:"nombre",render:n=>e(M,{...n,label:"Nombre"})}),a(A,{children:[e(Z,{}),e(_,{})]})]})},disableRowSelectionOnClick:!0,rows:l,columns:p}),a(P,{open:h,onClose:()=>{s(null),t.current=void 0},arrow:"right-top",children:[a(b,{component:T,to:I.dashboard.campeonatos.manageCategoria(i.id||"",t.current),children:[e(m,{icon:"mdi:eye"}),"Administrar"]}),a(b,{onClick:()=>{s(null),r(t.current)},children:[e(m,{icon:"eva:edit-fill"}),"Cambiar nombre"]}),a(b,{onClick:()=>{s(null),d(t.current)},sx:{color:"error.main"},children:[e(m,{icon:"eva:trash-2-outline"}),"Eliminar"]})]})]})},se=J().shape({name:D().required("Nombre es requerido"),gender:D().required("Género es requerido")}),le={name:"",gender:""},k=({onSubmit:l,initialValues:f,edit:d=!1})=>{const r=L({resolver:K(se),defaultValues:le,mode:"onBlur",values:f});return a(U,{hf:r,onSubmit:l,children:[e(v,{name:"name",control:r.control,render:i=>e(M,{...i,label:"Nombre",floatingLabel:!1})}),e(v,{name:"gender",control:r.control,render:i=>e(ee,{...i,label:"Género",options:[{label:"Masculino",value:"male"},{label:"Femenino",value:"female"}],floatingLabel:!1})}),e(A,{children:e(Q,{children:d?"Guardar":"Crear"})})]})},ye=({campeonato:l})=>{const f=R(),[d,r]=u.useState(!1),[i,g]=u.useState(),[h,s]=u.useState(!1),t=l.categories||[],p=ae(),n=re(),C=te(),H=t==null?void 0:t.find(o=>o.id===i),c=H===void 0?void 0:{...H};return a(G,{children:[e(V,{children:e("title",{children:"Categorias | LIGA CUBB"})}),a(j,{children:[e(z,{heading:`Listado de Categorias - ${l.name}`,links:[{name:"Campeonatos",href:I.dashboard.campeonatos.list},{name:"Categorias"}],action:e($,{onClick:()=>r(!0),variant:"contained",startIcon:e(m,{icon:"eva:plus-fill"}),children:"Nueva categoría"})}),e(ne,{children:e(ie,{data:t,isLoading:!1,onDelete:o=>f({action:async()=>C.mutateAsync(o)}),onEdit:o=>{g(o),s(!0)}})})]}),a(S,{open:d,onClose:()=>r(!1),children:[e(N,{children:e(B,{label:"Nueva categoria",onClick:()=>r(!1)})}),e(F,{sx:{mb:4},children:e(k,{onSubmit:async o=>p.mutateAsync({...o,leagueName:l.name},{onSuccess:()=>{y({variant:"success",message:"Categoria creada exitosamente"}),r(!1)}})})})]}),a(S,{open:h,onClose:()=>s(!1),children:[e(N,{children:e(B,{label:"Editar categoria",onClick:()=>s(!1)})}),e(F,{sx:{mb:4},children:e(k,{edit:!0,onSubmit:async o=>n.mutateAsync({...o,id:i},{onSuccess:()=>{y({variant:"success",message:"Categoria editada exitosamente"}),r(!1)}}),initialValues:{name:(c==null?void 0:c.name)||"",gender:(c==null?void 0:c.gender)||""}})})]})]})};export{ye as default};
