import{bl as w,r as u,a as e,T as x,e as E,F as G,I as q,z as m,j as a,o as O,aD as P,aE as b,L as T,q as A,aF as R,W as V,aG as j,B as $,b1 as S,bm as N,b2 as F,bn as y}from"./index-41171d5e.js";import{C as z}from"./CustomBreadcrumbs-d1600cc8.js";import{u as I,d as W,C as v,a as L,H as U,b as J}from"./styles-0db8a13f.js";import{u as K,H as Q,a as X,b as Y}from"./useTableQuery-54069143.js";import"./compressor.esm-2f7fd899.js";import"./Image-4f419779.js";import{H as M}from"./HitTextField-87bdfa3f.js";import{D}from"./DialogHeader-6536537f.js";import{c as Z,a as B,o as _}from"./yup-4caf009a.js";import{H as ee}from"./HitSelectField-1181103a.js";import{u as ae,a as re,b as te}from"./CategoriaRepository-b1635a31.js";import{C as ne}from"./Card-65106afd.js";import"./Select-5bd52ba1.js";import"./Grid-4bc07afd.js";import"./Autocomplete-fed4dfde.js";import"./Close-4614118c.js";import"./Chip-cfc1950e.js";import"./KeyboardArrowRight-4557c216.js";import"./enums-ec95615b.js";import"./useSupenseQuery-97e21a26.js";const oe={nombre:""},ie=({data:l,isLoading:f,onDelete:d,onEdit:r})=>{const i=w(),g=I({defaultValues:oe}),[p,s]=u.useState(null),t=u.useRef(),h=K([{field:"nombre",headerName:"Nombre",type:"string",renderHeader:()=>e("div",{className:"px-2",children:"Nombre"}),renderCell:n=>e("div",{className:"w-full px-2",children:e(x,{children:n.row.name})})},{field:"gender",headerName:"Género",type:"string",renderHeader:()=>e("div",{className:"px-2",children:"Género"}),renderCell:n=>e("div",{className:"w-full px-2",children:e(x,{children:E(n.row.gender)})})},{field:"action",headerName:"Acciones",maxWidth:200,type:"actions",align:"center",headerAlign:"center",renderCell:n=>e(G,{children:e(q,{onClick:C=>{t.current=n.row.id,s(C.currentTarget)},children:e(m,{icon:"eva:more-vertical-fill"})})})}]);return a(O,{children:[e(Q,{filter:{hf:g,render:a(W,{children:[e(v,{name:"nombre",render:n=>e(M,{...n,label:"Nombre"})}),a(L,{children:[e(X,{}),e(Y,{})]})]})},disableRowSelectionOnClick:!0,rows:l,columns:h}),a(P,{open:p,onClose:()=>{s(null),t.current=void 0},arrow:"right-top",children:[a(b,{component:T,to:A.dashboard.campeonatos.manageCategoria(i.id||"",t.current),children:[e(m,{icon:"mdi:eye"}),"Administrar"]}),a(b,{onClick:()=>{s(null),r(t.current)},children:[e(m,{icon:"eva:edit-fill"}),"Cambiar nombre"]}),a(b,{onClick:()=>{s(null),d(t.current)},sx:{color:"error.main"},children:[e(m,{icon:"eva:trash-2-outline"}),"Eliminar"]})]})]})},se=Z().shape({name:B().required("Nombre es requerido"),gender:B().required("Género es requerido")}),le={name:"",gender:""},k=({onSubmit:l,initialValues:f,edit:d=!1})=>{const r=I({resolver:_(se),defaultValues:le,mode:"onBlur",values:f});return a(U,{hf:r,onSubmit:l,children:[e(v,{name:"name",control:r.control,render:i=>e(M,{...i,label:"Nombre",floatingLabel:!1})}),e(v,{name:"gender",control:r.control,render:i=>e(ee,{...i,label:"Género",options:[{label:"Masculino",value:"male"},{label:"Femenino",value:"female"}],floatingLabel:!1})}),e(L,{children:e(J,{children:d?"Guardar":"Crear"})})]})},Ge=({campeonato:l})=>{const f=R(),[d,r]=u.useState(!1),[i,g]=u.useState(),[p,s]=u.useState(!1),t=l.categories||[],h=ae(),n=re(),C=te(),H=t==null?void 0:t.find(o=>o.id===i),c=H===void 0?void 0:{...H};return a(G,{children:[e(V,{children:e("title",{children:"Categorias | LIGA CUBB"})}),a(j,{children:[e(z,{heading:`Listado de Categorias - ${l.name}`,links:[{name:"Campeonatos",href:A.dashboard.campeonatos.list},{name:"Categorias"}],action:e($,{onClick:()=>r(!0),variant:"contained",startIcon:e(m,{icon:"eva:plus-fill"}),children:"Nueva categoría"})}),e(ne,{children:e(ie,{data:t,isLoading:!1,onDelete:o=>f({action:async()=>C.mutateAsync(o)}),onEdit:o=>{g(o),s(!0)}})})]}),a(S,{open:d,onClose:()=>r(!1),children:[e(N,{children:e(D,{label:"Nueva categoria",onClick:()=>r(!1)})}),e(F,{sx:{mb:4},children:e(k,{onSubmit:async o=>h.mutateAsync({...o,leagueName:l.name},{onSuccess:()=>{y({variant:"success",message:"Categoria creada exitosamente"}),r(!1)}})})})]}),a(S,{open:p,onClose:()=>s(!1),children:[e(N,{children:e(D,{label:"Editar categoria",onClick:()=>s(!1)})}),e(F,{sx:{mb:4},children:e(k,{edit:!0,onSubmit:async o=>n.mutateAsync({...o,id:i},{onSuccess:()=>{y({variant:"success",message:"Categoria editada exitosamente"}),r(!1)}}),initialValues:{name:(c==null?void 0:c.name)||"",gender:(c==null?void 0:c.gender)||""}})})]})]})};export{Ge as default};
