import{r as w,aF as P,b0 as y,j as i,a as e,o as V,I as v,aY as H,b1 as U,b2 as M,b3 as T,B as I,ac as j,ax as R,b4 as W,aw as _,F as $,W as G,A as N,aG as K,q as S}from"./index-c23903f8.js";import{u as Y}from"./userRepository-0fddb214.js";import{C as z}from"./CustomBreadcrumbs-a5dcf113.js";import{c as J,a as A,b as Q,d as X,o as Z}from"./yup-5bc9912e.js";import{e as ee,G as ae,T as B,u as re,H as te,C as h,a as oe,b as ne}from"./styles-bb773ccc.js";import"./compressor.esm-3ab290a9.js";import"./Image-dd45a27b.js";import{H as E}from"./HitPasswordField-87c1b3a5.js";import{H as se}from"./HitTextField-48ffeaee.js";import{A as ie,c as le}from"./Autocomplete-cd9cc086.js";import{C as ce}from"./Card-9f0c7488.js";import"./useSupenseQuery-b777e0ff.js";import"./Select-2d9d323e.js";import"./Grid-e20c1929.js";import"./InputAdornment-742361d8.js";import"./Close-206562f3.js";import"./Chip-98127efc.js";const de=le(),ue=({label:c,colSpan:s,options:o,field:r,textFieldProps:f,onDelete:C,onEdit:k,onCreate:q,fieldState:x,...L})=>{const g=w.useRef(null),D=P(),m=ee(),b=y({mutationFn:k}),F=y({mutationFn:q}),[d,p]=w.useState();return i(ae,{colSpan:s,children:[e(ie,{...r,openOnFocus:!0,freeSolo:!0,multiple:!0,selectOnFocus:!0,handleHomeEndKeys:!0,loading:F.isLoading,clearOnBlur:!0,loadingText:"Loading...",onChange:async(n,a)=>{if(a){if(a.some(t=>t.includes('Add "'))){const t=a.find(u=>u.includes('Add "')).replace('Add "',"").replace('"',""),l=a.map(u=>u.replace('Add "',"").replace('"',""));await F.mutateAsync(t),m.setValue(r.name,l);return}m.setValue(r.name,a)}},options:o,fullWidth:!0,renderOption:(n,a)=>a.includes('Add "')?e(V,{...n,sx:{color:"primary.main"},component:"li",children:a}):i(V,{...n,sx:{display:"flex",width:"100%"},style:{justifyContent:"space-between"},component:"li",children:[a,i("div",{children:[e(v,{onClick:t=>{t.stopPropagation(),p(a)},children:e(H,{icon:"heroicons:pencil",height:14})}),e(v,{onClick:t=>{t.stopPropagation(),D({action:async()=>{await C(a),m.setValue(r.name,r.value.filter(l=>l!==a))}})},children:e(H,{icon:"heroicons:x-mark",height:14})})]})]}),filterOptions:(n,a)=>{const t=de(n,a),{inputValue:l}=a,u=n.some(O=>l===O);return l!==""&&!u&&t.push(`Add "${l}"`),t},...L,renderInput:n=>{var a;return e(B,{...n,label:c,error:!!x.error,helperText:((a=x.error)==null?void 0:a.message)??"",...f})}}),i(U,{open:d!==void 0,onClose:()=>p(void 0),children:[e(M,{children:e(B,{fullWidth:!0,sx:{mt:6},hiddenLabel:!0,autoFocus:!0,defaultValue:d,inputRef:g})}),i(T,{children:[e(I,{onClick:()=>p(void 0),children:"Cancel"}),e(j,{onClick:async()=>{var a;const n=g.current.value;await b.mutateAsync({prevValue:d,newValue:n}),p(void 0),m.setValue(r.name,r.value.map(t=>t===d?n:t)),(a=g.current)==null||a.focus()},variant:"contained",disabled:d===""||b.isLoading,loading:b.isLoading,children:"Save"})]})]})]})},me=J().shape({email:A().required("Email es requerido").email(),password:A().min(4,"Contraseña debe tener al menos 4 caracteres").required("Contraseña es requerida"),password_confirmation:A().required("Es necesario confirmar la Contraseña").oneOf([Q("password")],"Las contraseñas no coinciden"),roles:X().min(1,"Debes elegir al menos un rol").required("Debes elegir al menos un rol")}),pe={email:"1",roles:[],password:"",password_confirmation:""};function he({onSubmit:c}){const s=re({resolver:Z(me),defaultValues:pe,mode:"onBlur"});return i(te,{hf:s,onSubmit:c,children:[e(h,{name:"email",control:s.control,render:o=>e(se,{...o,label:"Email",placeholder:"Carlos"})}),e(h,{name:"password",control:s.control,render:o=>e(E,{...o,label:"Contraseña"})}),e(h,{name:"password_confirmation",control:s.control,render:o=>e(E,{...o,label:"Confirmación de Contraseña"})}),e(h,{name:"roles",control:s.control,render:o=>e(ue,{...o,label:"Roles",onCreate:async r=>alert(r),onDelete:async r=>alert(r),onEdit:async r=>alert(r),options:["admin","otroAdmin","otrotroAdmin"]})}),e(oe,{children:e(ne,{children:"Crear"})})]})}const Le=()=>{const{enqueueSnackbar:c}=R(),s=Y(),{themeStretch:o}=W(),r=_(),f=async C=>{await s.mutateAsync(C),c({message:"User created!"}),r(S.dashboard.categorias.list)};return i($,{children:[e(G,{children:i("title",{children:[" Crear usuario | ",N]})}),i(K,{maxWidth:o?!1:"lg",children:[e(z,{heading:"Alta - Administradores",links:[{name:"Listado",href:S.dashboard.categorias.list},{name:"Alta"}]}),e(ce,{sx:{p:3},children:e(he,{onSubmit:f})})]})]})};export{Le as AdminUserCreatePage,Le as default};
