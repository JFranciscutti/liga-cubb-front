import{r as p,a as e,T as f,F as C,I as F,z as c,j as r,o as x,aE as T,aF as h,L as A,q as B,W as S,aH as D,B as L,aI as w,aJ as k,aK as q,aL as I}from"./index-7564c5a3.js";import{C as E}from"./useSupenseQuery-2f1fe18d.js";import{u as b,f as P,C as m,b as g,c as G,a as u,o as O,H as R,d as M}from"./styles-3f44635e.js";import{u as j,H as V,a as W,b as $}from"./useTableQuery-57349f10.js";import"./compressor.esm-bc452357.js";import"./Image-6bd31657.js";import{H as y}from"./HitTextField-1715ae1e.js";import{C as z}from"./Campeonato-60b6e0fd.js";import{D as J}from"./DialogHeader-b66d443c.js";import{H as K}from"./HitNumberField-dd450b14.js";import{H as Q}from"./HitSelectField-dd9c2783.js";import{b as U,c as X}from"./CampeonatoRepository-1824db64.js";import{C as Y}from"./Card-33a9d174.js";import"./Select-801e906b.js";import"./Grid-e2d030a2.js";import"./Close-b57c7e68.js";import"./KeyboardArrowRight-15df010f.js";import"./enums-ec95615b.js";const Z={nombre:""},_=({data:i,isLoading:l,onDelete:o,onEdit:t})=>{const a=b({defaultValues:Z}),[H,d]=p.useState(null),s=p.useRef(),v=j([{field:"nombre",headerName:"Nombre",type:"string",renderHeader:()=>e("div",{className:"px-2",children:"Nombre"}),renderCell:n=>e("div",{className:"w-full px-2",children:e(f,{children:n.row.name})})},{field:"type",headerName:"Tipo",type:"string",renderCell:n=>e("div",{className:"w-full px-2",children:e(f,{children:n.row.type===z.COPA?"Copa":"Torneo Regular"})})},{field:"action",headerName:"Acciones",maxWidth:200,type:"actions",align:"center",headerAlign:"center",renderCell:n=>e(C,{children:e(F,{onClick:N=>{s.current=n.row.id,d(N.currentTarget)},children:e(c,{icon:"eva:more-vertical-fill"})})})}]);return r(x,{children:[e(V,{filter:{hf:a,render:r(P,{children:[e(m,{name:"nombre",render:n=>e(y,{...n,label:"Nombre"})}),r(g,{children:[e(W,{}),e($,{})]})]})},disableRowSelectionOnClick:!0,rows:i,columns:v}),r(T,{open:H,onClose:()=>{d(null),s.current=void 0},arrow:"right-top",children:[r(h,{component:A,to:B.dashboard.campeonatos.manage(s.current),children:[e(c,{icon:"mdi:eye"}),"Administrar"]}),r(h,{onClick:()=>{d(null),o(s.current)},sx:{color:"error.main"},children:[e(c,{icon:"eva:trash-2-outline"}),"Eliminar"]})]})]})},ee=G().shape({name:u().required("Nombre es requerido"),year:u().required("Año es requerido"),type:u().required("Tipo es requerido")}),ae={name:"",type:""},re=({onSubmit:i,initialValues:l,edit:o=!1})=>{const t=b({resolver:O(ee),defaultValues:ae,mode:"onBlur",values:l});return r(R,{hf:t,onSubmit:i,children:[e(m,{name:"name",control:t.control,render:a=>e(y,{...a,label:"Nombre",floatingLabel:!1})}),e(m,{name:"year",control:t.control,render:a=>e(K,{...a,label:"Año",floatingLabel:!1})}),e(m,{name:"type",control:t.control,render:a=>e(Q,{...a,label:"Tipo",options:[{label:"Torneo regular",value:"league"},{label:"Copa",value:"cup"}],floatingLabel:!1})}),e(g,{children:e(M,{children:o?"Guardar":"Crear"})})]})},ve=()=>{const{data:i}=U(),[l,o]=p.useState(!1),t=X();return r(C,{children:[e(S,{children:e("title",{children:"Campeonatos | LIGA CUBB"})}),r(D,{children:[e(E,{heading:"Listado - Campeonatos",links:[{name:""}],action:e(L,{variant:"contained",startIcon:e(c,{icon:"eva:plus-fill"}),onClick:()=>o(!0),children:"Nuevo campeonato"})}),e(Y,{children:e(_,{data:i,isLoading:!1,onDelete:a=>{},onEdit:a=>{}})})]}),r(w,{open:l,onClose:()=>o(!1),children:[e(k,{children:e(J,{label:"Nuevo campeonato",onClick:()=>o(!1)})}),e(q,{sx:{mb:4},children:e(re,{onSubmit:async a=>{await t.mutateAsync({...a,year:Number(a.year)},{onSuccess:()=>{o(!1),I("Campeonato creado correctamente",{variant:"success"})}})}})})]})]})};export{ve as default};
