import{b3 as $,a as e,F as v,j as i,aI as A,aJ as V,aK as R,T as f,at as q,o as p,S as N,I as b,a9 as w,r as H,aD as Y,bw as O,B as J,W as U,aH as Q,ay as I}from"./index-e0ec8746.js";import{C as W}from"./useSupenseQuery-df6877ce.js";import{I as F}from"./Image-07734c82.js";import{c as z,a as n,k as L,j as x,u as K,o as X,l as k,H as Z,C as c,b as _,d as ee}from"./styles-07de506b.js";import{f as ae,g as re}from"./CategoriaRepository-776d4995.js";import{D as le}from"./DialogHeader-b8eedb58.js";import{H as j,a as ie,c as oe}from"./canchas-12ca8816.js";import"./compressor.esm-0f4ad7e4.js";import{H as D}from"./HitNumberField-d5d983f8.js";import{H as T}from"./HitSelectField-0476fdb4.js";import{H as te}from"./HitTextField-e489ad45.js";import{G as a}from"./Grid-e8368c00.js";import{a as se}from"./EquipoRepository-3ef6feef.js";import{C as M}from"./Card-76798bab.js";import"./Select-1cf546fd.js";import"./KeyboardArrowRight-8dd4c9a3.js";import"./TextField-619215a7.js";import"./FormControl-e0285977.js";import"./InputAdornment-f4ec09d4.js";import"./JugadoresRepository-0cb78d17.js";const ne=z().shape({date:n().required(),dateNumber:L().required(),homeTeam:n().required(),awayTeam:n().required(),field:n().required(),linemenTeam:n().required(),scorer:n().required(),comments:n().optional(),homeTeamGoals:L().required().min(0),awayTeamGoals:L().required().min(0),homeTeamPlayerGoals:x().of(n()).required(),awayTeamPlayerGoals:x().of(n()).required(),homeTeamYellowCards:x().of(n()).required(),awayTeamYellowCards:x().of(n()).required(),homeTeamRedCards:x().of(n()).required(),awayTeamRedCards:x().of(n()).required()}),E={date:$(),dateNumber:0,homeTeam:"",awayTeam:"",field:"",linemenTeam:"",scorer:"",comments:"",homeTeamGoals:"0",awayTeamGoals:"0",homeTeamPlayerGoals:[{playerId:"",goals:0}],awayTeamPlayerGoals:[{playerId:"",goals:0}],homeTeamYellowCards:[],homeTeamRedCards:[],awayTeamYellowCards:[],awayTeamRedCards:[]},B=d=>({label:d.name+" "+d.lastName,value:d.membershipNumber}),ce=({open:d,match:o,elegibleTeams:u,handleClose:y,handleSave:C})=>{const{data:t}=ae(o==null?void 0:o.homeTeam,o==null?void 0:o.awayTeam,(o==null?void 0:o.phaseId)||"",!!(o!=null&&o.homeTeam)&&!!o.awayTeam),r=K({resolver:X(ne),defaultValues:E,values:E,mode:"onBlur"}),g=k({control:r.control,name:"homeTeamPlayerGoals"}),m=k({control:r.control,name:"awayTeamPlayerGoals"}),S=async l=>{console.log(l)},G=t==null?void 0:t.homeTeam.players.map(B),P=t==null?void 0:t.awayTeam.players.map(B);return t?i(A,{open:d,onClose:y,PaperProps:{style:{width:"100%"}},children:[e(V,{children:e(le,{label:`Editar partido - Fecha ${t.dateNumber}`,onClick:y})}),e(R,{sx:{width:"100%",height:"100%"},children:e(a,{container:!0,sx:{py:5,px:2},children:i(Z,{hf:r,onSubmit:S,children:[i(a,{container:!0,spacing:2,justifyContent:"center",children:[i(a,{item:!0,xs:12,className:"flex justify-between",children:[i(a,{item:!0,xs:4,className:"flex gap-2",children:[e(a,{item:!0,children:e(F,{src:t.homeTeam.logo})}),e(f,{variant:"h6",align:"center",children:t.homeTeam.name})]}),e(a,{item:!0,xs:1,children:e(f,{variant:"h6",align:"center",children:"VS"})}),i(a,{item:!0,xs:4,className:"flex flex-row-reverse gap-2",children:[e(a,{item:!0,children:e(F,{src:t.awayTeam.logo})}),e(f,{variant:"h6",align:"center",children:t.awayTeam.name})]})]}),e(a,{item:!0,xs:12,children:e(q,{sx:{bgcolor:"gray"}})}),i(a,{item:!0,xs:12,className:"flex flex-col gap-5",children:[e(p,{className:"flex w-full justify-center",children:e(f,{className:"font-bold",children:"Goles local"})}),g.fields.map((l,s)=>i(N,{spacing:2,direction:"row",children:[e(c,{name:`homeTeamPlayerGoals.${s}.playerId`,control:r.control,rules:{required:!0},render:h=>e(T,{...h,label:"Jugador",floatingLabel:!1,options:G||[]})}),e(c,{name:`homeTeamPlayerGoals.${s}.goals`,control:r.control,rules:{required:!0},render:h=>e(D,{...h,label:"Goles",floatingLabel:!1})}),i(N,{alignSelf:"flex-end",children:[e(b,{disabled:g.fields.length===1,onClick:()=>g.remove(s),children:e(w,{style:{width:22,height:22},icon:"ic:outline-delete"})}),e(p,{className:"flex justify-end w-full",children:e(b,{onClick:()=>g.append({playerId:"",goals:0}),children:e(w,{style:{width:22,height:22},icon:"material-symbols:add-box-outline-rounded"})})})]})]},l.id))]}),e(a,{item:!0,xs:12,children:e(q,{sx:{bgcolor:"gray"}})}),i(a,{item:!0,xs:12,className:"flex flex-col gap-5",children:[e(p,{className:"flex w-full justify-center",children:e(f,{className:"font-bold",children:"Goles visitante"})}),m.fields.map((l,s)=>i(N,{spacing:2,direction:"row",children:[e(c,{name:`awayTeamPlayerGoals.${s}.playerId`,control:r.control,rules:{required:!0},render:h=>e(T,{...h,label:"Jugador",floatingLabel:!1,options:P||[]})}),e(c,{name:`awayTeamPlayerGoals.${s}.goals`,control:r.control,rules:{required:!0},render:h=>e(D,{...h,label:"Goles",floatingLabel:!1})}),i(N,{alignSelf:"flex-end",children:[e(b,{disabled:m.fields.length===1,onClick:()=>m.remove(s),children:e(w,{style:{width:22,height:22},icon:"ic:outline-delete"})}),e(p,{className:"flex justify-end w-full",children:e(b,{onClick:()=>m.append({playerId:"",goals:0}),children:e(w,{style:{width:22,height:22},icon:"material-symbols:add-box-outline-rounded"})})})]})]},l.id))]}),e(a,{item:!0,xs:12,children:e(q,{sx:{bgcolor:"gray"}})}),e(a,{item:!0,xs:6,children:e(c,{name:"homeTeamYellowCards",control:r.control,rules:{required:!0},render:l=>e(j,{...l,label:"Tarjetas amarillas - Local",floatingLabel:!1,options:G||[]})})}),e(a,{item:!0,xs:6,children:e(c,{name:"awayTeamYellowCards",control:r.control,rules:{required:!0},render:l=>e(j,{...l,label:"Tarjetas amarillas - Visitante",floatingLabel:!1,options:P||[]})})}),e(a,{item:!0,xs:6,children:e(c,{name:"homeTeamRedCards",control:r.control,rules:{required:!0},render:l=>e(j,{...l,label:"Tarjetas rojas - Local",floatingLabel:!1,options:G||[]})})}),e(a,{item:!0,xs:6,children:e(c,{name:"awayTeamRedCards",control:r.control,rules:{required:!0},render:l=>e(j,{...l,label:"Tarjetas rojas - Visitante",floatingLabel:!1,options:P||[]})})}),e(a,{item:!0,xs:12,children:e(q,{sx:{bgcolor:"gray"}})}),e(a,{item:!0,xs:12,children:e(c,{name:"date",control:r.control,rules:{required:!0},render:l=>e(ie,{...l,label:"Fecha y hora de inicio",floatingLabel:!1,disablePast:!0,format:"DD/MM/YYYY - HH:mm"})})}),e(a,{item:!0,xs:12,children:e(c,{name:"field",control:r.control,rules:{required:!0},render:l=>e(T,{...l,label:"Cancha",floatingLabel:!1,options:oe.canchas||[]})})}),e(a,{item:!0,xs:6,children:e(c,{name:"linemenTeam",control:r.control,rules:{required:!0},render:l=>e(T,{...l,label:"Equipo linea",floatingLabel:!1,options:u.map(s=>({value:s.id,label:s.name}))||[]})})}),e(a,{item:!0,xs:6,children:e(c,{name:"scorer",control:r.control,rules:{required:!0},render:l=>e(T,{...l,label:"Equipo planillero",floatingLabel:!1,options:u.map(s=>({value:s.id,label:s.name}))||[]})})}),e(a,{item:!0,xs:12,children:e(c,{name:"comments",control:r.control,rules:{required:!0},render:l=>e(te,{...l,label:"Comentarios",floatingLabel:!1,multiline:!0})})})]}),e(_,{children:e(ee,{children:"Actualizar informaciÃ³n"})})]})})})]}):e(v,{})},de=({fecha:d,isLoading:o})=>{const u=H.useRef(),{idFase:y,idCategoria:C}=Y(),[t,r]=H.useState(!1),{data:g}=se(C||"");return o?e(O,{}):i(v,{children:[e(M,{className:"flex flex-col gap-6 w-full py-4 px-2",children:d.map((m,S)=>i(a,{container:!0,className:"flex items-center gap-2 justify-between",children:[i(a,{item:!0,xs:9,className:"flex items-center justify-between w-full",children:[i(a,{item:!0,className:"flex items-center gap-2",style:{flex:1},children:[e(p,{className:"flex items-center justify-center h-10 min-w-10 rounded-full bg-gray-50",children:e(F,{src:m.equipoLocal.logoUrl,className:"h-10 w-10 min-w-10"})}),e("p",{className:"line-clamp-1",style:{whiteSpace:"nowrap"},children:m.equipoLocal.name})]}),e(a,{item:!0,className:"flex items-center justify-center",style:{flexShrink:0,minWidth:"50px"},children:e(f,{children:"VS"})}),i(a,{item:!0,className:"flex items-center gap-2",style:{flex:1,justifyContent:"flex-end"},children:[e("p",{className:"line-clamp-1",style:{whiteSpace:"nowrap",textAlign:"right"},children:m.equipoVisitante.name}),e(p,{className:"flex items-center justify-center h-10 min-w-10 rounded-full bg-gray-50",children:e(F,{src:m.equipoVisitante.logoUrl,className:"h-10 w-10 min-w-10"})})]})]}),e(a,{item:!0,xs:2,className:"flex gap-2 justify-end",children:e(J,{variant:"contained",onClick:()=>{u.current={homeTeam:m.equipoLocal.id,awayTeam:m.equipoVisitante.id,phaseId:y||""},r(!0)},children:"Editar"})})]},S))}),e(ce,{open:t,match:u.current,handleClose:()=>{r(!1),u.current=void 0},handleSave:()=>{},elegibleTeams:g.teams||[]})]})},me=de;function ve(){const d=Y(),[o,u]=H.useState(1),{data:y,isLoading:C,isError:t}=re(d.idFase||"",o);return i(v,{children:[e(U,{children:e("title",{children:"Equipos | LIGA CUBB"})}),i(Q,{children:[e(W,{heading:"Fixture - Categoria",links:[{name:"Listado",href:I.dashboard.campeonatos.list},{name:"Administrar",href:I.dashboard.campeonatos.manageCategoria(d.idCampeonato||"",d.idCategoria||"")},{name:"Fixture"}]}),i(M,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[i(p,{className:"flex w-full p-4 justify-between items-center",children:[e(b,{disabled:o===1,onClick:()=>u(r=>r-1),children:e(w,{icon:"ion:caret-back"})}),i(f,{className:"font-bold",children:["Fecha ",o]}),e(b,{disabled:o===15,onClick:()=>u(r=>r+1),children:e(w,{icon:"ion:caret-forward"})})]}),e(me,{fecha:y||[],isLoading:C})]})]})]})}export{ve as default};
