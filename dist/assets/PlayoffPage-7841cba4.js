import{r as g,j as s,o as y,a,d as P,T as v,aE as d,B as T,bl as L,aw as q,F as B,W as w,aG as A,q as C,bn as x}from"./index-c23903f8.js";import{C as j}from"./CustomBreadcrumbs-a5dcf113.js";import{h as G}from"./CategoriaRepository-204dc213.js";import{a as N}from"./EquipoRepository-600107ee.js";import{G as b}from"./Grid-e20c1929.js";import{F as S,I as E,S as F}from"./Select-2d9d323e.js";import{C as I}from"./Card-9f0c7488.js";import"./enums-ec95615b.js";import"./useSupenseQuery-b777e0ff.js";import"./JugadoresRepository-576570e9.js";const W=({equipos:i,handleSave:c})=>{const[n,f]=g.useState(Array.from({length:8},()=>({team1:"",team2:""}))),[l,m]=g.useState([]),o=(t,r,e)=>{const u=[...n],p=u[t][`team${r}`];u[t][`team${r}`]=e,f(u),m(e===""?l.filter(h=>h!==p):[...l.filter(h=>h!==p),e])};return s(y,{className:"container mx-auto p-4",children:[a(b,{container:!0,spacing:2,children:n.map((t,r)=>a(b,{item:!0,xs:12,md:3,style:{flexWrap:"wrap"},children:s(P,{className:"mb-4 p-4 flex flex-col gap-2 items-center",children:[s(v,{children:["Partido ",r+1]}),s(S,{fullWidth:!0,className:"",children:[a(E,{children:"Local"}),s(F,{value:t.team1,onChange:e=>o(r,1,e.target.value),children:[a(d,{value:"",children:a("em",{children:"Libre"})}),i.map(e=>a(d,{value:e.id,disabled:l.includes(e.id),children:e.name},e.id))]})]}),a(v,{children:"VS"}),s(S,{fullWidth:!0,children:[a(E,{children:"Visitante"}),s(F,{value:t.team2,onChange:e=>o(r,2,e.target.value),children:[a(d,{value:"",children:a("em",{children:"Libre"})}),i.map(e=>a(d,{value:e.id,disabled:l.includes(e.id),children:e.name},e.id))]})]})]})},r))}),a(y,{className:"flex w-full items-end justify-center",children:a(T,{onClick:()=>c(n),variant:"contained",children:"Guardar"})})]})},J=()=>{const i=L(),c=q(),{data:n,isLoading:f,isError:l,refetch:m}=N(i.id||""),o=G(),t=async r=>{if(r.filter(e=>e.team1===""&&e.team2==="").length>0){x({message:"No se puede guardar una fase sin partidos",variant:"error"});return}await o.mutateAsync({partidos:r.map(e=>({homeTeamId:e.team1||null,awayTeamId:e.team2||null})),categoryId:i.id||""}),x({message:"Fase creada con Ã©xito",variant:"success"}),c(-1)};return s(B,{children:[a(w,{children:a("title",{children:"Equipos | LIGA CUBB"})}),s(A,{children:[a(j,{heading:"Fixture - Categoria",links:[{name:"Listado",href:C.dashboard.categorias.list},{name:"Administrar",href:C.dashboard.categorias.edit(i.id||"")},{name:"Fixture"}]}),a(I,{sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:a(W,{equipos:n.teams.filter((r,e)=>e<12)||[],handleSave:t})})]})]})};export{J as default};
