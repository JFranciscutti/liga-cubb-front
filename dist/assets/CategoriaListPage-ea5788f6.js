import{aD as w,r as g,a as e,T as N,e as O,F as L,I as P,a9 as u,j as a,o as T,aE as q,aF as b,L as R,ay as M,aG as V,W as j,aH as $,B as U,aI as S,aJ as x,aK as F,aL as y}from"./index-e0ec8746.js";import{G as D,C as W}from"./useSupenseQuery-df6877ce.js";import{u as k,g as z,C as v,b as A,c as J,a as G,o as K,H as Q,d as X}from"./styles-07de506b.js";import{u as Y,H as Z,a as _,b as ee}from"./useTableQuery-ec6154cf.js";import"./compressor.esm-0f4ad7e4.js";import"./Image-07734c82.js";import{H as E}from"./HitTextField-e489ad45.js";import{D as I}from"./DialogHeader-b8eedb58.js";import{H as ae}from"./HitSelectField-0476fdb4.js";import{u as re,a as te,b as ne}from"./CategoriaRepository-776d4995.js";import{C as oe}from"./Card-76798bab.js";import"./Select-1cf546fd.js";import"./Grid-e8368c00.js";import"./Close-f9fb50a2.js";import"./KeyboardArrowRight-8dd4c9a3.js";import"./TextField-619215a7.js";import"./FormControl-e0285977.js";const ie={nombre:""},se=({data:l,isLoading:f,onDelete:d,onEdit:r})=>{const i=w(),h=k({defaultValues:ie}),[p,s]=g.useState(null),t=g.useRef(),C=Y([{field:"nombre",headerName:"Nombre",type:"string",renderHeader:()=>e("div",{className:"px-2",children:"Nombre"}),renderCell:n=>e("div",{className:"w-full px-2",children:e(N,{children:n.row.name})})},{field:"gender",headerName:"Género",type:"string",renderHeader:()=>e("div",{className:"px-2",children:"Género"}),renderCell:n=>{const m=n.row.gender==="female"?D.FEMENINO:D.MASCULINO;return e("div",{className:"w-full px-2",children:e(N,{children:O(m)})})}},{field:"action",headerName:"Acciones",maxWidth:200,type:"actions",align:"center",headerAlign:"center",renderCell:n=>e(L,{children:e(P,{onClick:m=>{t.current=n.row.id,s(m.currentTarget)},children:e(u,{icon:"eva:more-vertical-fill"})})})}]);return a(T,{children:[e(Z,{filter:{hf:h,render:a(z,{children:[e(v,{name:"nombre",render:n=>e(E,{...n,label:"Nombre"})}),a(A,{children:[e(_,{}),e(ee,{})]})]})},disableRowSelectionOnClick:!0,rows:l,columns:C}),a(q,{open:p,onClose:()=>{s(null),t.current=void 0},arrow:"right-top",children:[a(b,{component:R,to:M.dashboard.campeonatos.manageCategoria(i.id||"",t.current),children:[e(u,{icon:"mdi:eye"}),"Administrar"]}),a(b,{onClick:()=>{s(null),r(t.current)},children:[e(u,{icon:"eva:edit-fill"}),"Cambiar nombre"]}),a(b,{onClick:()=>{s(null),d(t.current)},sx:{color:"error.main"},children:[e(u,{icon:"eva:trash-2-outline"}),"Eliminar"]})]})]})},le=J().shape({name:G().required("Nombre es requerido"),gender:G().required("Género es requerido")}),ce={name:"",gender:""},B=({onSubmit:l,initialValues:f,edit:d=!1})=>{const r=k({resolver:K(le),defaultValues:ce,mode:"onBlur",values:f});return a(Q,{hf:r,onSubmit:l,children:[e(v,{name:"name",control:r.control,render:i=>e(E,{...i,label:"Nombre",floatingLabel:!1})}),e(v,{name:"gender",control:r.control,render:i=>e(ae,{...i,label:"Género",options:[{label:"Masculino",value:"male"},{label:"Femenino",value:"female"}],floatingLabel:!1})}),e(A,{children:e(X,{children:d?"Guardar":"Crear"})})]})},Ge=({campeonato:l})=>{const f=V(),[d,r]=g.useState(!1),[i,h]=g.useState(),[p,s]=g.useState(!1),t=l.categories||[],C=re(),n=te(),m=ne(),H=t==null?void 0:t.find(o=>o.id===i),c=H===void 0?void 0:{...H};return a(L,{children:[e(j,{children:e("title",{children:"Categorias | LIGA CUBB"})}),a($,{children:[e(W,{heading:`Listado de Categorias - ${l.name}`,links:[{name:"Campeonatos",href:M.dashboard.campeonatos.list},{name:"Categorias"}],action:e(U,{onClick:()=>r(!0),variant:"contained",startIcon:e(u,{icon:"eva:plus-fill"}),children:"Nueva categoría"})}),e(oe,{children:e(se,{data:t,isLoading:!1,onDelete:o=>f({action:async()=>m.mutateAsync(o)}),onEdit:o=>{h(o),s(!0)}})})]}),a(S,{open:d,onClose:()=>r(!1),children:[e(x,{children:e(I,{label:"Nueva categoria",onClick:()=>r(!1)})}),e(F,{sx:{mb:4},children:e(B,{onSubmit:async o=>C.mutateAsync({...o,leagueName:l.name},{onSuccess:()=>{y({variant:"success",message:"Categoria creada exitosamente"}),r(!1)}})})})]}),a(S,{open:p,onClose:()=>s(!1),children:[e(x,{children:e(I,{label:"Editar categoria",onClick:()=>s(!1)})}),e(F,{sx:{mb:4},children:e(B,{edit:!0,onSubmit:async o=>n.mutateAsync({...o,id:i},{onSuccess:()=>{y({variant:"success",message:"Categoria editada exitosamente"}),r(!1)}}),initialValues:{name:(c==null?void 0:c.name)||"",gender:(c==null?void 0:c.gender)||""}})})]})]})};export{Ge as default};
