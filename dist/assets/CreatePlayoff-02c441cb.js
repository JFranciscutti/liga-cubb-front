import{r as m,j as s,o as f,a as e,F as H,d as T,T as P,aF as o,B as w}from"./index-e0ec8746.js";import{c as B,k as E,u as L,o as N,H as j,C as G,b as V,d as W,I as g}from"./styles-07de506b.js";import"./compressor.esm-0f4ad7e4.js";import"./Image-07734c82.js";import{H as $}from"./HitSelectField-0476fdb4.js";import{G as S}from"./Grid-e8368c00.js";import{F as y}from"./FormControl-e0285977.js";import{S as F}from"./Select-1cf546fd.js";const k=B().shape({selectedPhase:E().required()}),O=({equipos:n,handleSave:C})=>{const[i,d]=m.useState(),[c,p]=m.useState([]),v=(l,t,a)=>{if(!i)return;const h=[...i],b=h[l][`team${t}`];h[l][`team${t}`]=a,d(h),p(a===""?c.filter(u=>u!==b):[...c.filter(u=>u!==b),a])},x=l=>{d(Array.from({length:l},()=>({team1:"",team2:""})))},r=L({resolver:N(k),defaultValues:{selectedPhase:32},mode:"onBlur"});return m.useEffect(()=>{i!==void 0&&d(void 0),r.watch("selectedPhase")>n.length/2?r.setError("selectedPhase",{type:"manual",message:"No hay suficientes equipos para esta fase"}):r.clearErrors("selectedPhase")},[r.watch("selectedPhase")]),s(f,{className:"container mx-auto p-4",children:[e(f,{children:s(j,{hf:r,onSubmit:async l=>{if(console.log(l.selectedPhase,n.length),l.selectedPhase>n.length/2){r.setError("selectedPhase",{type:"manual",message:"No hay suficientes equipos para esta fase"});return}return x(l.selectedPhase),Promise.resolve()},children:[e(G,{name:"selectedPhase",control:r.control,rules:{required:!0},render:l=>e($,{...l,label:"Selecciona la fase",floatingLabel:!1,options:[{value:32,label:"32avos de final"},{value:16,label:"16avos de final"},{value:8,label:"8vos de final"},{value:4,label:"Cuartos de final"},{value:2,label:"Semifinal"},{value:1,label:"Final"}]})}),e(V,{children:e(W,{children:"Ir a la creaciÃ³n de cruces"})})]})}),!!i&&s(H,{children:[e(S,{container:!0,spacing:2,children:i.map((l,t)=>e(S,{item:!0,xs:12,md:3,style:{flexWrap:"wrap"},children:s(T,{className:"mb-4 p-4 flex flex-col gap-2 items-center",children:[s(P,{children:["Partido ",t+1]}),s(y,{fullWidth:!0,className:"",children:[e(g,{children:"Local"}),s(F,{value:l.team1,onChange:a=>v(t,1,a.target.value),children:[e(o,{value:"",children:e("em",{children:"Libre"})}),n.map(a=>e(o,{value:a.id,disabled:c.includes(a.id),children:a.name},a.id))]})]}),e(P,{children:"VS"}),s(y,{fullWidth:!0,children:[e(g,{children:"Visitante"}),s(F,{value:l.team2,onChange:a=>v(t,2,a.target.value),children:[e(o,{value:"",children:e("em",{children:"Libre"})}),n.map(a=>e(o,{value:a.id,disabled:c.includes(a.id),children:a.name},a.id))]})]})]})},t))}),e(f,{className:"flex w-full items-end justify-center",children:e(w,{onClick:()=>C(i),variant:"contained",children:"Guardar"})})]})]})};export{O as C};
